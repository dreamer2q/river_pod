---
title: ProviderObserver
---

import CodeBlock from "@theme/CodeBlock";
import logger from "!!raw-loader!/docs/concepts/provider_observer_logger.dart";
import { trimSnippet } from "../../../../../src/components/CodeSnippet";

[ProviderObserver] 监听 ProviderContainer 的变化。

为了使用，请扩展 ProviderObserver 类并重写需要使用到的方法。

[ProviderObserver] has three methods :

[ProviderObserver] 有三个方法：

- `didUpdateProvider` 当有 provider 完成初始化时调用，参数是 `value`。
- `didDisposeProvider` 当有 provider 被销毁时调用。
- `didUpdateProvider` 当 provider 发送通知时调用。

### 使用示例:

一个简单的 [ProviderObserver] 的使用示例是通过重写 `didUpdateProvider` 方法来记录 provider 的变化。

<CodeBlock>{trimSnippet(logger)}</CodeBlock>

现在，每次 provider 的值发生变化时，logger 就会记录下来。

```
I/flutter (16783): {
I/flutter (16783):   "provider": "counter",
I/flutter (16783):   "newValue": "1"
I/flutter (16783): }
```

:::note:
对于可变的状态，如 [StateController] (StateProvider.state) 和 [ChangeNotifier]，previousValue 和 newValue 将会相同，
因为它们引用相同的 `StateController` / `ChangeNotifier`。
:::

[providerobserver]: https://pub.dev/documentation/riverpod/latest/riverpod/ProviderObserver-class.html
[statecontroller]: https://pub.dev/documentation/riverpod/latest/riverpod/StateController-class.html
[stateprovider.state]: https://pub.dev/documentation/riverpod/latest/riverpod/StateProvider/state.html
[changenotifier]: https://api.flutter.dev/flutter/foundation/ChangeNotifier-class.html
